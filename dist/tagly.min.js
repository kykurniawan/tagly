!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.Tagly=t():e.Tagly=t()}(self,(()=>(()=>{var e={138:(e,t,i)=>{const s=i(246).Z;e.exports=s},246:(e,t,i)=>{"use strict";i.d(t,{Z:()=>s});const s=class extends EventTarget{constructor(e,t={}){super(),this._element=e,this._id=this._element.id,this._values=[],this._error="",this._initConfig(t),this._createElements(),this._configureStyle(),this._configureListener(),this._setInitValue()}_initConfig(e){null==e.clearDefaultStyle&&(e.clearDefaultStyle=!1),null==e.displayError&&(e.displayError=!0),this._config=e}_createElements(){const e=document.createElement("div");e.setAttribute("id",this._id+"__wrapper"),null!=this._config.wrapperClasses&&this._config.wrapperClasses.forEach((t=>{e.classList.add(t)}));const t=document.createElement("div");t.setAttribute("id",this._id+"__error-message");const i=document.createElement("span");i.setAttribute("id",this._id+"__preview"),null!=this._config.previewClasses&&this._config.previewClasses.forEach((e=>{i.classList.add(e)}));const s=document.createElement("input");s.setAttribute("id",this._id+"__input"),null!=this._config.inputClasses&&this._config.inputClasses.forEach((e=>{s.classList.add(e)})),s.placeholder="Type then enter",null!=this._config.inputPlaceholder&&(s.placeholder=this._config.inputPlaceholder);const n=document.createElement("input");n.setAttribute("id",this._id+"__value"),null!=this._config.name?n.setAttribute("name",this._config.name):n.setAttribute("name",this._id+"__value"),n.setAttribute("type","hidden"),this._wrapper=e,this._errorMessage=t,this._preview=i,this._input=s,this._hiddenInput=n,this._element.append(this._errorMessage),this._element.append(this._wrapper),this._wrapper.append(this._preview),this._wrapper.append(this._input),this._wrapper.append(this._hiddenInput)}_configureStyle(){if(0==this._config.clearDefaultStyle&&(this._wrapper.style.border="1px solid black",this._wrapper.style.cursor="text",this._wrapper.style.display="flex",this._wrapper.style.flexWrap="wrap",this._wrapper.style.alignItems="center"),null!=this._config.wrapperStyles)for(const[e,t]of Object.entries(this._config.wrapperStyles))this._wrapper.style[e]=t;if(0==this._config.clearDefaultStyle&&(this._input.style.border="none",this._input.style.outline="none",this._input.style.boxSizing="border-box",this._input.style.flexGrow="1",this._input.style.padding="5px"),null!=this._config.inputStyles)for(const[e,t]of Object.entries(this._config.inputStyles))this._input.style[e]=t}_configureListener(){this._element.addEventListener("click",(e=>{this._input.focus()})),this._input.addEventListener("keydown",(e=>{if("Backspace"==e.key&&""==e.target.value&&this._values.length>0){let e=this._values[this._values.length-1];this._removeValue(e.id)}this._clearError()})),this._input.addEventListener("keypress",(e=>{if("Enter"==e.key||","==e.key){e.preventDefault();let t=this._sanitizeTag(e.target.value);if(""!=t){let e={id:this._uniqueId(),tag:t};this._addValue(e)}e.target.value=""}}))}_setError(e){if(this._config.displayError){let t=document.createElement("span");if(0==this._config.clearDefaultStyle&&(t.style.marginBottom="5px",t.style.display="inline-block",t.style.color="red"),null!=this._config.errorStyles)for(const[e,i]of Object.entries(this._config.errorStyles))t.style[e]=i;null!=this._config.errorClasses&&this._config.errorClasses.forEach((e=>{t.classList.add(e)})),t.textContent=e,this._errorMessage.append(t)}const t=new CustomEvent("error",{detail:e});this.dispatchEvent(t)}_clearError(){this._errorMessage.innerHTML=""}_setInitValue(){if(null!=this._config.value)this._setValues(this._sanitizeRawValue(this._config.value));else if(this._element.hasAttribute("data-value")){const e=this._element.getAttribute("data-value");this._setValues(this._sanitizeRawValue(e))}}_setValues(e){this._values=e,this._updatePreview(),this._updateHiddenInputValue()}_addValue(e){if(this._values.filter((t=>t.tag==e.tag)).length<1){this._values.push(e),this._updatePreview(),this._updateHiddenInputValue();const t=new CustomEvent("added",{detail:e});this.dispatchEvent(t);const i=new CustomEvent("changed",{detail:this._values});this.dispatchEvent(i)}}_removeValue(e){const t=this._values.filter((t=>t.id===e))[0];this._values=this._values.filter((t=>t.id!==e)),this._updatePreview(),this._updateHiddenInputValue();const i=new CustomEvent("removed",{detail:t});this.dispatchEvent(i);const s=new CustomEvent("changed",{detail:this._values});this.dispatchEvent(s)}_updatePreview(){this._preview.innerHTML="",this._values.forEach((e=>{let t=e.id,i=e.tag,s=e.tag,n=this._createPreviewItem(t,i,s);this._preview.append(n)}))}_updateHiddenInputValue(){this._hiddenInput.value=this._values.map((e=>e.tag)).join(",")}_sanitizeRawValue(e){let t=[];return e.split(",").forEach((e=>{if(""!=(e=this._sanitizeTag(e))){const i=this._uniqueId(),s=e;t.filter((e=>e.tag==s)).length<1&&t.push({id:i,tag:s})}})),t}_sanitizeTag(e){return e=e.trim().replace(/(^\w|\s\w)/g,(e=>e.toUpperCase())),0==this._isValidTag(e)&&(e=""),e}_isValidTag(e){return this._isAlphaNumericSpace(e)?(this._clearError(),!0):(this._setError("Only alphanumeric and space are allowed"),!1)}_createPreviewItem(e,t,i){let s=document.createElement("button");if(s.tabIndex="-1",s.innerHTML="&#10007;",null!=this._config.deleteItemButtonInnerHTML&&(s.innerHTML=this._config.deleteItemButtonInnerHTML),0==this._config.clearDefaultStyle&&(s.style.cursor="pointer",s.style.marginRight="10px",s.style.padding="0",s.style.border="none",s.style.background="transparent"),null!=this._config.deleteItemButtonStyles)for(const[e,t]of Object.entries(this._config.deleteItemButtonStyles))s.style[e]=t;null!=this._config.deleteItemButtonClasses&&this._config.deleteItemButtonClasses.forEach((e=>{s.classList.add(e)})),s.addEventListener("click",(e=>{this._removeValue(e.target.parentElement.id)}));let n=document.createElement("span");if(0==this._config.clearDefaultStyle&&(n.style.boxSizing="border-box",n.style.padding="5px",n.style.margin="5px",n.style.display="inline-block",n.style.backgroundColor="rgb(239, 239, 239)"),null!=this._config.previewItemStyles)for(const[e,t]of Object.entries(this._config.previewItemStyles))n.style[e]=t;return n.setAttribute("id",e),n.setAttribute("data-tag",t),null!=this._config.previewItemClasses&&this._config.previewItemClasses.forEach((e=>{n.classList.add(e)})),n.append(s),n.append(i),n}_uniqueId(){return Math.random().toString(36).replace(".","")}_isAlphaNumericSpace(e){return e.match(/^[0-9a-zA-Z ]+$/)}}}},t={};function i(s){var n=t[s];if(void 0!==n)return n.exports;var r=t[s]={exports:{}};return e[s](r,r.exports,i),r.exports}return i.d=(e,t)=>{for(var s in t)i.o(t,s)&&!i.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})},i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),i(138)})()));